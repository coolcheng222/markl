# Docker

>  [TOC]

## 一. Docker绪论

### 1.  为什么出现

一款产品从开发到上线,从操作系统到运行环境,再到应用配置.作为 开发+运维 的协作我们需要关心很多东西,特别是各种版本迭代后,不同版本环境的兼容,是对运维人员的考验.

* `Docker`对此问题给出了一个标准化的解决方案
  * 解决的方案是__软件带环境安装__,即$\color {red}{安装的时候,把原始环境一模一样的复制过来.开发人员利用Docker消除协作编码时机器环境不同的问题}$

### 2. Docker的技术

三要素:仓库,镜像,容器

* __镜像技术__:(images)

  * 打破"代码即应用"的理念,从系统环境开始,自底向上打包应用

  ![image-20200507125827079](C:\Users\carrzhou\AppData\Roaming\Typora\typora-user-images\image-20200507125827079.png)

  * 映像档即应用,达到跨平台无缝接轨运作

### 3. Docker理念

Docker是基于Go语言实现的云开源项目.

Docker的主要目标是=="Build,Ship and Run Any App Anywhere "==

$\color {blue}{一次封装,到处运行}$

### 4. 是什么?一句话总结

解决了运行环境和配置问题的**软件容器**,方便做持续继承并有助于整体发布的**容器虚拟化技术.**

### 5. 能干什么

* __虚拟机(virtual machine)__ 是带环境安装的一种解决而方案,可以在一个操作系统中运行另一个操作系统.而对底层系统来说,虚拟机就是一个普通文件,跟其他部分关联不大
  * 缺点: 占用资源多,冗余步骤多,开启慢
* __Linux容器(LXC)__: 因为虚拟机有上述缺点,所以linux发展处另一种<u>虚拟化技术</u>.它不是模拟一个完整的操作系统,而是对进程进行了隔离,就可以将软件运行所需的资源打包到一个隔离的容器中.不用复刻整个操作系统就能保证进程在任何环境下都能好好运行.
  * 与传统虚拟化的不同之处:
    * 传统虚拟机是虚拟出一套硬件后,在其上运行一个操作系统.
    * 容器内进程直接运行于宿主的内核,也没有硬件虚拟,所以更为轻便
    * ,容器之间没有相互影响

then: 

__开发自己运维(DevOps)__,两者界限逐渐模糊.

### 6. 三要素

![image-20200509140621231](C:\Users\carrzhou\AppData\Roaming\Typora\typora-user-images\image-20200509140621231.png)

---------------------------Docker架构图----------------------------------------

* __镜像image__: 是一个__只读__的模板,可以用来创建Docker容器,且可以创建多个,类比面向对象的__类__
* __容器container__: 
  * 容器的最上层__可读可写__
  * 容器是利用镜像创建的运行实例.
  * Docker是利用一个或一组利用容器独立运行的应用
  * 可以被启动,开始,停止,删除,并且相互隔离
  * 可以看做简易版的Linux环境和运行在其中的应用
* __仓库repository__:
  * 是集中存储__镜像__的场所
  * 与仓库注册服务器(registry)不一样,registry一般存有多个仓库,每个仓库存着多个镜像,每个镜像有不同的tag
  * 分为public和private两种
  * 最大的公开仓库叫__Docker Hub__,其他还有阿里云,网易云等

打包好的环境就是镜像文件,通过镜像生成Docker容器.一个容器运行一种服务.

